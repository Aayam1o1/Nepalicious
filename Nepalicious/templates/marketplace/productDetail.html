<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .comment-user {
            font-family: 'Libre Franklin', sans-serif;
            /* Add additional styles as needed */
        }

        #gallery {
            scroll-snap-type: x mandatory;
        }

        #gallery>div {
            scroll-snap-align: start;
        }

        #gallery img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.1/flowbite.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.js" defer></script>
</head>

<body>
    {% extends '../navigationBar/base.html' %}
    {% block content %}
    <div class="container my-[5rem] w-[80%] h-full mx-auto">

        <div class="product-description flex h-[25rem] ml-10 w-full justify-around">
        
            <!-- displaying product picture -->
            <div id="gallery" class="relative w-[50%] ml-[10rem] overflow-hidden" data-carousel="slide">
                <!-- Carousel wrapper -->
                <div class="relative h-full w-[50%] overflow-hidden rounded-lg"></div>
                    {% for image in product_image %}
                    <div class="hidden duration-700 ease-in-out w-full" data-carousel-item>
                        <img src="{{ image.image.url }}" alt="product"
                            class="rounded-md md:aspect-auto w-full h-full rounded-lg object-cover " />
                    </div>
                    {% endfor %}
            </div>

            
            <!-- product Details -->
            <div class="w-[50%]  pl-[5rem]">
                <div class="px-4">
                    <h1 class="text-4xl text-[#F89500] font-semibold">{{ productDetail.productName }} - {{ productDetail.productBrand }}</h1>
                    <div class="flex mt-3">
                        <div>
                            <p class="text-xl mt-1 mr-4 text-[#BE485D]">Rs {{ productDetail.productPrice }}</p>
                        </div>
                        <div>
                            <p class="rating-stars" class="">
                                <!-- Stars will be dynamically added here -->
                            </p>
                        </div>
                        <div class="mt-1 ml-4">
                            <p class="italic">17 reviews</p>
                        </div>
                    </div>
                    <div>
                        <p class="mt-3 text-l text-[#BE485D]">Stock ({{ productDetail.productStock }})</p>
                    </div>
                    <hr class="mt-4 border-1 w-[25rem]">

                    <!-- description -->
                    <div class="mt-5 w-[30rem]">
                        <p>{{ productDetail.productDescription }}</p>
                    </div>

                    <!-- button -->
                    <div class="mt-5">
                        <button type="button" class=" rounded-l w-[10rem] h-10 bg-[#FFC061]">
                            <span class="text-white">Add To Cart</span>
                        </button>
                    </div>
                </div>

            </div>
        
        </div>


        <div class="container-2 mt-[5rem] w-full">

            <!-- for commment -->
            <div class="commnet-container flex h-[60vh] justify-around">
                <div class="w-[60%] ml-[7rem]">
                    <div>
                        <h1 class="text-5xl font-medium ml-4">Already Bought This??</h1>
                    </div>
                    <div class="my-[3rem]">
                        <button type="button" class=" rounded-xl w-[10rem] h-10 bg-[#FFC061] ml-5">
                            <span class="text-white">Give Feedback</span>
                        </button>
                    </div>
                    <div class="bg-blue-50  w-[80%] p-4 ml-4 rounded-xl">
                        <!-- comment section -->
                        <div class="comment-user flex">
                            <div>
                                <span>
                                    <img class="h-[2.5rem] w-[2.5rem] ml-4 mt-2 rounded-full object-cover"
                                        src="{{request.user.userprofilepicture.profileImage.url}}" alt="profile">
                                </span>
                            </div>
                            <div class="mt-[1rem] ml-4 text-l font-meduium">
                                Username
                            </div>
                        </div>
                        <div class="comment-user ml-5 mt-4 text-xs w-[90%] font-light leading-6">
                            Lorem ipsum dolor sit amet consectetur adipisicing elit. Saepe et quae quo beatae libero
                            nemo deleniti voluptas voluptates quia? Quo deserunt iste natus quasi, dolore minima
                            eligendi nihil itaque eum. Lorem ipsum dolor sit amet consectetur adipisicing elit. Ratione,
                            dignissimos sequi voluptates omnis dicta totam aut nemo, odio cupiditate labore vel quo
                            error.
                            Culpa beatae quae natus iste? Iure, accusantium.
                        </div>
                    </div>
                </div>
                <!-- recommend other products -->
                <div class="bg-blue-100 w-[40%]">
                    other products
                </div>
            </div>

        </div>
    </div>



    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Select all elements with the class 'rating-stars'
            const starsContainers = document.querySelectorAll('.rating-stars');

            // Iterate through each stars container
            starsContainers.forEach(starsContainer => {
                // Create 5 stars for each container
                for (let i = 1; i <= 5; i++) {
                    const star = document.createElement('span');
                    star.classList.add(
                        'cursor-pointer',
                        'text-2xl',
                        'mr-1',
                        'pr-1',
                        'hover:text-yellow-500',
                        'transition',
                        'transform',
                        'duration-200',
                        'ease-in-out'
                    );
                    star.innerHTML = 'â˜…';

                    // Attach click event to each star
                    star.addEventListener('click', function () {
                        const rating = i;
                        updateRating(starsContainer, rating);
                    });

                    starsContainer.appendChild(star);
                }
            });

            // Function to update rating for a specific container
            function updateRating(container, rating) {
                // Update UI (you can also send the rating to the server)
                highlightStars(container, rating);
            }

            // Function to highlight stars up to the given rating for a specific container
            function highlightStars(container, rating) {
                const stars = container.children;

                for (let i = 0; i < stars.length; i++) {
                    if (i < rating) {
                        stars[i].classList.add('text-yellow-500');
                    } else {
                        stars[i].classList.remove('text-yellow-500');
                    }
                }
            }
        });

    </script>
    {% endblock %}
</body>

</html>