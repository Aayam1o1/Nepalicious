<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chef Dashboard</title>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const imageInput = document.getElementById('image-input');
            const imagePreview = document.getElementById('edit-image-preview');

            imageInput.addEventListener('change', function () {
                if (this.files && this.files[0]) {
                    const reader = new FileReader();

                    reader.onload = function (e) {
                        imagePreview.src = e.target.result;
                    };

                    reader.readAsDataURL(this.files[0]);
                } else {
                    // Clear the preview when no file is selected
                    imagePreview.src = '';
                }
            });
        });

    </script>
</head>

<body class="bg-gray-300">
    {% extends '../profiles/navigationSidebar/profilebase.html' %}
    {% block content %}
    <form action="" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <!-- For changing profile -->
        <div>
            <div class="border border-[#B6B6B6] rounded-full h-[10rem] w-[10rem] ml-[6rem]" id="profileImageField">
                <img id="edit-image-preview" src="{{ request.user.userprofilepicture.profileImage.url }}" alt="profile"
                    class="h-[100%] w-[100%] object-cover rounded-full" />
            </div>
            <div class="flex justify-center ">
                <label for="image-input"
                    class="bg-[#1F2937] cursor-pointer text-white rounded-md relative inline-flex items-center px-7 py-2 border border-transparent text-base leading-6 font-medium rounded-md transition duration-150 ease-in-out">
                    <span>Change profile</span>
                    <input id="image-input" name="img" type="file" accept="image/png, image/jpeg" multiple
                        class="absolute block opacity-0 w-full h-full cursor-pointer" />
                </label>
            </div>
            <input type="hidden" name="user" value="{{request.user}}">
            <div class="w-[380px] flex gap gap-10">
                <div class="pt-4">
                    <button name="saveImage" class="bg-[#1F2937] rounded-[3px] p-2 pl-5 pr-5 text-white">Save</button>
                </div>

                <!-- Remove button -->
                <div class="pt-4">
                    <button name="deleteImage"
                        class="text-[#1F2937] rounded-[3px] focus:outline-none border border-gray-400 p-2 pl-5 pr-5 ">Remove</button>
                </div>
            </div>
        </div>

        <!-- For changing other details -->
        <div class="mt-5">
            <div class="p-2 pl-16 grid gap-6 md:grid-cols-2 ">
                <div>
                    <label for="first_name" class="block mb-2 text-xl font-semibold text-gray-900 ">First name</label>
                    <input name="first_name" value="{{request.user.first_name}}" type="first_name"
                        class="focus:outline-none  text-gray-600 border border-2 border-[#85858] py-3 pl-2 rounded-[4px] w-full"
                        placeholder="Your First Name">
                </div>
                <div>
                    <label for="last_name" class="block mb-2 text-xl font-semibold text-gray-900 ">Last name</label>
                    <input name="last_name" value="{{request.user.last_name}}" type="first_name"
                        class="focus:outline-none text-gray-600 border border-2 border-[#85858] py-3 pl-2 rounded-[4px] w-full"
                        placeholder="Your last Name">
                </div>
            </div>

            <div class="p-2 pt-6 pl-16 grid gap-6 md:grid-cols-2 ">
                <div class="pt-3">
                    <label for="address" class="block mb-2 text-xl font-semibold text-gray-900 ">Address</label>
                    <input name="address" type="address" value="{{request.user.usersdetail.address}}"
                        class="focus:outline-none text-gray-600 border border-2 border-[#85858] py-3 pl-2 rounded-[4px] w-full"
                        placeholder="Your Email">
                </div>

                <div class="pt-3">
                    <label for="phone_number" class="block mb-2 text-xl font-semibold text-gray-900 ">Contact
                        Number</label>
                    <input name="phone_number" type="phone_number" value="{{request.user.usersdetail.phone_number}}"
                        class="focus:outline-none text-gray-600 border border-2 border-[#85858] py-3 pl-2 rounded-[4px] w-full"
                        placeholder="Contact Number">
                </div>
            </div>
            <div class="p-2 pt-6 pl-16 ">
                <label for="email" class="block mb-2 text-xl font-semibold text-gray-900 ">Email</label>
                <input name="email" type="email" value="{{request.user.email}}"
                    class="focus:outline-none text-gray-600 border border-2 border-[#85858] py-3 pl-2 rounded-[4px] w-full"
                    placeholder="Your Email">
            </div>

            <div>

                <input type="hidden" name="user" value="{{request.user}}">
            </div>

            <div class="p-4 mb-2 pl-16 w-56">
                <button type=submit name="update"
                    class="bg-[#FFC061] rounded-[3px] w-full py-2 text-white rounded-xl">Update</button>
            </div>
        </div>
    </form> <!-- FORM End -->

    {% endblock %}

</body>
<!-- for viewing image after selecting new-->

</html>